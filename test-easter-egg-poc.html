<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¯ å½©è›‹åŠŸèƒ½æµ‹è¯• - POCä¿®å¤éªŒè¯</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .test-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
        }
        
        .test-button:hover {
            background: #0056b3;
        }
        
        .reset-button {
            background: #dc3545;
        }
        
        .reset-button:hover {
            background: #c82333;
        }
        
        .status-display {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 12px;
            white-space: pre-wrap;
        }
        
        .success {
            color: #28a745;
        }
        
        .error {
            color: #dc3545;
        }
        
        .info {
            color: #17a2b8;
        }
    </style>
</head>
<body>
    <h1>ğŸ¯ å½©è›‹åŠŸèƒ½æµ‹è¯• - POCä¿®å¤éªŒè¯</h1>
    
    <div class="test-section">
        <h2>ğŸ”§ æµ‹è¯•æ§åˆ¶</h2>
        <button class="test-button reset-button" onclick="resetAll()">é‡ç½®æ‰€æœ‰çŠ¶æ€</button>
        <button class="test-button" onclick="showEasterEgg()">å¼ºåˆ¶æ˜¾ç¤ºå½©è›‹</button>
        <button class="test-button" onclick="triggerAfternoonTea()">è§¦å‘ä¸‹åˆèŒ¶æé†’</button>
        <button class="test-button" onclick="triggerLunch()">è§¦å‘åˆé¤æé†’</button>
        <button class="test-button" onclick="unlockLunch()">è§£é”åˆé¤æé†’</button>
        <button class="test-button" onclick="showStatus()">æŸ¥çœ‹çŠ¶æ€</button>
    </div>
    
    <div class="test-section">
        <h2>ğŸ“Š çŠ¶æ€æ˜¾ç¤º</h2>
        <div id="statusDisplay" class="status-display">ç‚¹å‡»"æŸ¥çœ‹çŠ¶æ€"æŒ‰é’®æŸ¥çœ‹å½“å‰çŠ¶æ€...</div>
    </div>
    
    <div class="test-section">
        <h2>ğŸ“ æµ‹è¯•æ—¥å¿—</h2>
        <div id="logDisplay" class="status-display">æµ‹è¯•æ—¥å¿—å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...</div>
    </div>
    
    <!-- å¼•å…¥å¿…è¦çš„è„šæœ¬ -->
    <script src="js/constants.js"></script>
    <script src="js/easter-egg-ui.js"></script>
    <script src="js/afternoon-tea-easter-egg.js"></script>
    
    <!-- å½©è›‹å¼¹çª—DOMç»“æ„ -->
    <div id="easterEggBackdrop" class="easter-egg-backdrop"></div>
    <div id="easterEggModal" class="easter-egg-modal">
        <!-- å¼¹çª—å†…å®¹å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
    </div>
    
    <script>
        // é‡å†™console.logæ¥æ˜¾ç¤ºåœ¨é¡µé¢ä¸Š
        const originalLog = console.log;
        const logDisplay = document.getElementById('logDisplay');
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            const message = args.join(' ');
            logDisplay.innerHTML += message + '\n';
            logDisplay.scrollTop = logDisplay.scrollHeight;
        };
        
        // æµ‹è¯•å‡½æ•°
        function resetAll() {
            if (window.testEasterEggPOC) {
                window.testEasterEggPOC.reset();
            } else {
                localStorage.clear();
                location.reload();
            }
        }
        
        function showEasterEgg() {
            console.log('ğŸ¯ æµ‹è¯•ï¼šå¼ºåˆ¶æ˜¾ç¤ºå½©è›‹');
            if (window.testEasterEggPOC) {
                window.testEasterEggPOC.showEasterEgg();
            } else {
                // ç›´æ¥åˆ›å»ºå½©è›‹UIè¿›è¡Œæµ‹è¯•
                try {
                    const easterEggManager = new AfternoonTeaEasterEgg(null, null);
                    const ui = new EasterEggUI(easterEggManager);
                    ui.showFirstEasterEgg();
                } catch (error) {
                    console.error('âŒ åˆ›å»ºå½©è›‹UIå¤±è´¥:', error);
                }
            }
        }
        
        function triggerAfternoonTea() {
            console.log('ğŸµ æµ‹è¯•ï¼šè§¦å‘ä¸‹åˆèŒ¶æé†’');
            if (window.testEasterEggPOC) {
                window.testEasterEggPOC.triggerAfternoonTea();
            }
        }
        
        function triggerLunch() {
            console.log('ğŸ² æµ‹è¯•ï¼šè§¦å‘åˆé¤æé†’');
            if (window.testEasterEggPOC) {
                window.testEasterEggPOC.triggerLunch();
            }
        }
        
        function unlockLunch() {
            console.log('ğŸ”“ æµ‹è¯•ï¼šè§£é”åˆé¤æé†’');
            if (window.testEasterEggPOC) {
                window.testEasterEggPOC.unlockLunch();
            } else {
                localStorage.setItem('lunchReminderUnlocked', 'true');
                console.log('âœ… åˆé¤æé†’å·²æ‰‹åŠ¨è§£é”');
            }
        }
        
        function showStatus() {
            const statusDisplay = document.getElementById('statusDisplay');
            
            if (window.testEasterEggPOC) {
                const status = window.testEasterEggPOC.showStatus();
                statusDisplay.innerHTML = JSON.stringify(status, null, 2);
            } else {
                const status = {
                    localStorage: {
                        firstEasterEggShown: localStorage.getItem('afternoonTeaFirstEasterEggShown'),
                        lunchReminderUnlocked: localStorage.getItem('lunchReminderUnlocked'),
                        afternoonTeaLastTrigger: localStorage.getItem('afternoonTeaLastTrigger'),
                        lunchReminderLastTrigger: localStorage.getItem('lunchReminderLastTrigger')
                    },
                    classes: {
                        AfternoonTeaEasterEgg: typeof AfternoonTeaEasterEgg !== 'undefined',
                        EasterEggUI: typeof EasterEggUI !== 'undefined',
                        LUNCH_REMINDER_CONSTANTS: typeof LUNCH_REMINDER_CONSTANTS !== 'undefined'
                    },
                    constants: {
                        lunchEnabled: LUNCH_REMINDER_CONSTANTS?.ENABLED,
                        lunchShouldEnable: LUNCH_REMINDER_CONSTANTS?.shouldEnable?.(),
                        lunchIsUnlocked: LUNCH_REMINDER_CONSTANTS?.isUnlocked?.()
                    }
                };
                statusDisplay.innerHTML = JSON.stringify(status, null, 2);
            }
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåæ˜¾ç¤ºåˆå§‹çŠ¶æ€
        window.addEventListener('load', () => {
            console.log('ğŸ¯ æµ‹è¯•é¡µé¢å·²åŠ è½½');
            showStatus();
        });
    </script>
</body>
</html>